<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Pomodoro App</title>
    <meta charset="utf-8" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.1/css/all.css" crossorigin="anonymous">
    <link rel="shortcut icon" href="#">
    <!-- Google Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap"
      rel="stylesheet"/>
    <!-- JQ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <!-- <script src="clock.js"></script> -->
    <!-- <link rel="stylesheet" href="style.css" /> -->
    <style>

*{
    margin: 0;
    padding: 0;
    font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    box-sizing: border-box;
  }

body {
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
}  

.container{
    width: 800px;
    height: 600px;
    background-color: #f5f5f5;
    border-radius: 15px;
}

h1 {

    text-align: center;
    font-family: Pacifico, sans-serif;
    color: rgb(92, 91, 91);
    font-size: 48px;
}

#titleDiv {
    width: 800px;
    height: 100px;
    margin-top: 10px auto;
    display: flex;
    justify-content: center;
    align-items: center;
}

#vinylTable, #diskTable {
    width: 560px;
    height: 500px;
    margin: auto;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}
#diskTable {
    display: none;
    width: 100%;
    overflow: hidden;
  
}

#onOffBtn{
    width: 28px;
    height: 28px;
    background-color: #e2e2e2;
    position: absolute;
    z-index: 1;
    left: 25px;
    top: 38px;
    border-radius: 5px;
    font-size: 15px;
    text-align: center;
    padding: 4px 0 0 0;
    cursor: pointer;
    transition: all 0.5s;
}

#onOffBtn:hover{
    transition: 0.5s ease;
    transform: scale(1.2);
    background-color: #ffe591;
}



#vinylBox {
    width: 560px;
    height: 450px;
    background-color: grey;
    border-radius: 15px;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    box-shadow: 5px 5px black;
}

#vinylMain {
    width: 540px;
    height: auto;

}

#vinylNeedle {
    height: 400px;
    width: auto;
    position: absolute;
    right: 47px;
    top: 20px;
    cursor: pointer;
    /* transition: 1.5s ease; */
}

.needleMove{
    /* transition: 1.5s ; */
    transform:rotate(25deg);
    transform-origin:60% 20% ;
    pointer-events: none;
}

#timeTable {
    width: 150px;
    height: 60px;
    border-radius: 20px;
    opacity: 60%;
    font-size: 30px;
    /* background-color: #f5f5f5; */
    position: absolute;
    left: 154px;
    top: 207px;
    z-index: 1;
    display: flex;
    justify-content: center;
    align-items: center;
}

.timecount {
    width: 35px;
    height: 30px;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
}

.timecount span {
    font-family: Pacifico, sans-serif;
    width: 40px;
    height: 40px;
    text-shadow: 1px 1px 3px black;
}


.theBtn {
    width: 30px;
    height: 160px;
    position: absolute;
    top: 265px;
    right: 31px;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
}

#minBtn {
    width: 28px;
    height: 28px;
    background-color: rgb(209, 209, 209);
    border-radius: 5px;
    box-shadow: 3px 3px 2px rgb(99, 98, 98);
    /* position: relative; */
    transition: 0.3s;
    pointer-events: none;
}

#musicBtn {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    border: 5px solid rgb(170, 170, 170);
    position: absolute;
    bottom: 36px;
    left: 15px;
    background-color: rgb(211, 211, 211);
    outline: none;
    cursor: pointer;
    transition: all 0.5s ;
}
#musicBtn:hover{
    transition: 0.5s ease;
    transform: scale(1.1);
    box-shadow: 0px 3px #f5f5f5;
    background-color: #ffe591;
}

#liDot {
    width: 9px;
    height: 9px;
    border-radius: 50%;
    border: none;
    background-color:rgb(170, 170, 170) ;
    margin: auto;
    position: relative;
    top: -10px;
}

.albumStyle{
    width: 2000px;
    height: 400px;
    margin: auto;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    position: relative;
    transition: all 1s ease;
}


.albumImg{
    width: 450px;
    height: 308px;
    margin-right: 100px;
    border-radius: 40px;
    cursor: pointer;
    transition: all 0.5s;
}

.LRBtn {
    width: 45px;
    height: 60px;
    font-size: 40px;
    border: none;
    background: none;
    position: absolute;
    top: 160px;
    color: #696969;
    opacity: 70%;
    outline: none;
    cursor: pointer;
    transition: all 0.5s;
}

.LRBtn:hover {
    transform: scale(1.3);
}

#rightBtn {
    right: 70px;
}
#leftBtn {
    left: 70px;
}

#checkalbum {
    width: 70px;
    height: 50px;
    font-size: 25px;
    border: none;
    border-radius: 30px;
    outline: none;
    background: none;
    position: absolute;
    bottom: 40px;
    left: 350px;
    font-family: Pacifico, sans-serif;
    color:rgb(160, 158, 158);
    cursor: pointer;
    transition: all 0.5s;
}

#checkalbum:hover {
    color: rgb(92, 91, 91);
    background-color: #fff;
}

.chosealbum {
    background-color: #ffffff;
    background-color: #f5f5f5;
    transform: scale(1.1);
}








    </style>

  </head>
  <body>
    <div class="container">
    
      <div id="titleDiv">
        <h1>Vinyl Pomodoro</h1>
      </div>

      <div id="vinylTable">
          <!-- <div id="vinylBoxTop"></div> -->
          
          <div id="vinylBox">
            <div id="onOffBtn"><i class="fas fa-pause"></i></div>
            <button id="musicBtn"><div id="liDot"></div></button>
            <img id="vinylNeedle" src="needle.png" >
            <img id="vinylMain" src="vinyl.png" >
          </div>

          <div id="timeTable">
            <div class="timecount">
                <span id="minutesTimer">40</span>
            </div>

            <div class="timecount">
                <span>:</span>
            </div>

            <div class="timecount">
                <span id="secondTimer">00</span>
            </div>
          </div>

          <div class="theBtn">
            <div id ="minBtn"></div>
          </div>
      </div>

      <div id="diskTable">
          <button id="checkalbum">Back</button>
          <div id="album1" class="albumStyle">
            <img id="xxxalbum" class="albumImg" src="XXXalbum_2.png" value="1">
            <img id="peepalbum" class="albumImg" src="LILPEEPalbum_2.png" value="2">
            <img id="lofialbum" class="albumImg" src="lofi_2.png" value="3">
          </div>
          
          <button id="rightBtn" class="LRBtn"><i class="fas fa-chevron-right"></i></button>
          <button id="leftBtn" class="LRBtn"><i class="fas fa-chevron-left"></i></button>
      </div>



      
    </div>

    

    <script type="text/javascript">

    let minTime = $("#minutesTimer");
    let secTime = $("#secondTimer");
    let minValue = $("#minutesTimer").val();
    let audio1 = new Audio('lofixxx.mp3');
    let audio2 = new Audio('lofiPeep.mp3');
    let audio3 = new Audio('lofipolog.mp3');
    let xxxvalue = $("#xxxalbum").attr('value');
    let peepvalue = $("#peepalbum").attr('value');
    let lofivalue = $("#lofialbum").attr('value');
    // let get = localStorage.getItem("chosenAlbum");
    // console.log(get);



    $(".theBtn").mousedown((e)=>{
        let y = e.offsetY;
        let moveBtn = $("#minBtn");
        moveBtn.css("position","absolute");
        moveBtn.css("top",`${y}px`);
        var changeMin = Math.ceil(y/2/5)*5;
        minTime.text(changeMin);
        secTime.text("00");
    });

   
        $("#vinylNeedle").click(()=>{
            $("#vinylNeedle").toggleClass("needleMove");
            let get = localStorage.getItem("chosenAlbum");  
            console.log(get);
        if (secTime.text() != "00"){
            let leftSec = parseInt(secTime.text())+1 ;
            let leftSec2 = `${leftSec}000`;
            let minutes_setTimeout = setTimeout(minCount2, leftSec2);
            let seconds_interval = setInterval(secCount, 1000); 
            
            playget(get);
            
            $("#onOffBtn").click(()=>{
                clearInterval(minutes_setTimeout);
                clearInterval(seconds_interval);
                $("#vinylNeedle").removeClass("needleMove");
                stopAudio(get);
            })

      } else {
            secTime.text(59);
            minCount ();
            let minutes_interval = setInterval(minCount, 60000);
            let seconds_interval = setInterval(secCount, 1000);
            playget(get);

            $("#onOffBtn").click(()=>{
                let pauseTimeMin = minTime.text();
                // console.log(pauseTimeMin);
                clearInterval(minutes_interval);
                clearInterval(seconds_interval);
                $("#vinylNeedle").removeClass("needleMove");
                stopAudio(get);
        })
        }   
    });

    $("#musicBtn").click(()=>{
        $("#vinylTable").slideUp("normal");
        $("#diskTable").slideDown("normal");
    })

    $("#checkalbum").click(()=>{
        $("#vinylTable").slideDown("normal");
        $("#diskTable").slideUp("normal");
    })

    $("#rightBtn").click(()=>{
        let albumX = $("#album1");
        if (albumX[0].offsetLeft >= 0){
            console.log(albumX[0].offsetLeft);
            slidetomid();
            
        } else {
            console.log(albumX[0].offsetLeft);
            slidetolast();
        }
    })

    $("#leftBtn").click(()=>{
        let albumX = $("#album1");
        if (albumX[0].offsetLeft < -550){
            console.log(albumX[0].offsetLeft);
            slidetomid();
        } else if(albumX[0].offsetLeft = -550){
            console.log(albumX[0].offsetLeft);
            slidetostart();
        }
    })

    $("#xxxalbum").click(()=>{
        $("#peepalbum").removeClass("chosealbum");
        $("#lofialbum").removeClass("chosealbum");
        $("#xxxalbum").toggleClass("chosealbum");
        localStorage.setItem("chosenAlbum",xxxvalue);   
    })

    $("#peepalbum").click(()=>{
        $("#xxxalbum").removeClass("chosealbum");
        $("#lofialbum").removeClass("chosealbum");
        $("#peepalbum").toggleClass("chosealbum");
        localStorage.setItem("chosenAlbum",peepvalue);   
    })

    $("#lofialbum").click(()=>{
        $("#xxxalbum").removeClass("chosealbum");
        $("#peepalbum").removeClass("chosealbum");
        $("#lofialbum").toggleClass("chosealbum");
        localStorage.setItem("chosenAlbum",lofivalue);   
    })





function playget (e){
    if (e == 1){
        audio1.play();
    }else if (e == 2){
        audio2.play();
    }else {
        audio3.play();
    }
}

function stopAudio(e) {
    if (e == 1){
        audio1.pause();
    }else if (e == 2){
        audio2.pause();
    }else {
        audio3.pause();
    }
    // audio.currentTime = 0;
    }



    

      
    function slidetomid(){
        $("#album1").animate({left:"-550px"},300);
    }
    function slidetolast(){
        $("#album1").animate({left:"-1100px"},300);
    }
    function slidetostart(){
        $("#album1").animate({left:"0px"},300);
    }


    function minCount (){
        let startM= minTime.text()-1;
        minTime.text(startM);
    }

    function secCount(){
        if (secTime.text() <= 0){
            secTime.text(60);
            let startS= secTime.text()-1;
            secTime.text(startS);
        } else {
            let startS= secTime.text()-1;
            secTime.text(startS);
        }
    }

    function minCount2 (){
        let minPause = minTime.text()-1;
        minTime.text(minPause);
        let minutes_interval2 = setInterval(minCount, 60000);
    }

    
    
    

    
    
    
    


    
    

   

    
    
    </script>

  </body>
</html>