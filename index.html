<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Pomodoro App</title>
    <meta charset="utf-8" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.1/css/all.css" crossorigin="anonymous">

    <!-- Google Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap"
      rel="stylesheet"/>
    <!-- JQ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <!-- <script src="clock.js"></script> -->
    <!-- <link rel="stylesheet" href="style.css" /> -->
    <style>

*{
    margin: 0;
    padding: 0;
    font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    box-sizing: border-box;
  }

body {
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
}  

.container{
    width: 800px;
    height: 600px;
    background-color: #f5f5f5;
    border-radius: 15px;
}

h1 {

    text-align: center;
    font-family: Pacifico, sans-serif;
    color: rgb(92, 91, 91);
    font-size: 48px;
}

#titleDiv {
    width: 800px;
    height: 100px;
    margin-top: 10px auto;
    display: flex;
    justify-content: center;
    align-items: center;
}

#vinylTable {
    width: 560px;
    height: 500px;
    margin: auto;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}
/* #vinylBoxTop{
    width: 540px;
    height: 460px;
    background-color: white;
    opacity: 40%;
    border-radius: 15px;
    box-shadow: 5px 5px black;
    position: absolute;
    z-index: 1;
} */

#onOffBtn{
    width: 28px;
    height: 28px;
    background-color: #e2e2e2;
    position: absolute;
    z-index: 1;
    left: 25px;
    top: 38px;
    border-radius: 5px;
    font-size: 15px;
    text-align: center;
    padding: 4px 0 0 0;
    cursor: pointer;
}

#onOffBtn:hover{
    transition: 0.5s;
    background-color: #ffe591;
}



#vinylBox {
    width: 560px;
    height: 450px;
    background-color: grey;
    border-radius: 15px;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    box-shadow: 5px 5px black;
}

#vinylMain {
    width: 540px;
    height: auto;

}

#vinylNeedle {
    height: 400px;
    width: auto;
    position: absolute;
    right: 47px;
    top: 20px;
    cursor: pointer;
    /* transition: 1.5s ease; */
}

.needleMove{
    /* transition: 1.5s ; */
    transform:rotate(25deg);
    transform-origin:60% 20% ;
    pointer-events: none;
}

#timeTable {
    width: 150px;
    height: 60px;
    border-radius: 20px;
    opacity: 60%;
    font-size: 30px;
    /* background-color: #f5f5f5; */
    position: absolute;
    left: 154px;
    top: 214px;
    z-index: 1;
    display: flex;
    justify-content: center;
    align-items: center;
}

.timecount {
    width: 35px;
    height: 30px;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
}

.timecount span {
    width: 40px;
    height: 40px;
    text-shadow: 1px 1px 3px black;
}


.theBtn {
    width: 30px;
    height: 160px;
    position: absolute;
    top: 265px;
    right: 31px;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
}

#minBtn {
    width: 28px;
    height: 28px;
    background-color: rgb(209, 209, 209);
    border-radius: 5px;
    box-shadow: 3px 3px 2px rgb(99, 98, 98);
    /* position: relative; */
    transition: 0.3s;
}









    </style>

  </head>
  <body>
    <div class="container">
    
      <div id="titleDiv">
        <h1>Vinyl Pomodoro</h1>
      </div>

      <div id="vinylTable">
          <!-- <div id="vinylBoxTop"></div> -->
          
          <div id="vinylBox">
            <div id="onOffBtn"><i class="fas fa-pause"></i></div>
            <img id="vinylNeedle" src="needle.png" >
            <img id="vinylMain" src="vinyl.png" >
          </div>

          <div id="timeTable">
            <div class="timecount">
                <span id="minutesTimer">40</span>
            </div>

            <div class="timecount">
                <span>:</span>
            </div>

            <div class="timecount">
                <span id="secondTimer">00</span>
            </div>
        </div>


        <div class="theBtn">
            <div id ="minBtn"></div>
        </div>
      </div>

      
    </div>

    

    <script type="text/javascript">

    let minTime = $("#minutesTimer");
    let secTime = $("#secondTimer");
    let minValue = $("#minutesTimer").val();
    

    $(".theBtn").mousedown((e)=>{
        let y = e.offsetY;
        let moveBtn = $("#minBtn");
        moveBtn.css("position","absolute");
        moveBtn.css("top",`${y}px`);
        var changeMin = Math.ceil(y/2/5)*5;
        minTime.text(changeMin);
    });

   
        $("#vinylNeedle").click(()=>{
            $("#vinylNeedle").toggleClass("needleMove");
            
        if (secTime.text() != "00"){
            let leftSec = parseInt(secTime.text())+1 ;
            let leftSec2 = `${leftSec}000`;
            let minutes_setTimeout = setTimeout(minCount2, leftSec2);
            let seconds_interval = setInterval(secCount, 1000); 

            // let minutes_interval = setInterval(minCount, 60000);
            $("#onOffBtn").click(()=>{
                clearInterval(minutes_setTimeout);
                // clearInterval(minutes_interval);
                clearInterval(seconds_interval);
                $("#vinylNeedle").removeClass("needleMove");
            })

      } else {
            secTime.text(59);
            minCount ();
            let minutes_interval = setInterval(minCount, 60000);
            let seconds_interval = setInterval(secCount, 1000);

            $("#onOffBtn").click(()=>{
                let pauseTimeMin = minTime.text();
                // console.log(pauseTimeMin);
                clearInterval(minutes_interval);
                clearInterval(seconds_interval);
                $("#vinylNeedle").removeClass("needleMove");
        })
        }   
    });
    
    


    function minCount (){
        let startM= minTime.text()-1;
        minTime.text(startM);
    }

    function secCount(){
        if (secTime.text() <= 0){
            secTime.text(60);
            let startS= secTime.text()-1;
            secTime.text(startS);
        } else {
            let startS= secTime.text()-1;
            secTime.text(startS);
        }
    }

    function minCount2 (){
        let minPause = minTime.text()-1;
        minTime.text(minPause);
        let minutes_interval2 = setInterval(minCount, 60000);
    }

    
    

    
    
    
    


    
    

   

    
    
    </script>

  </body>
</html>